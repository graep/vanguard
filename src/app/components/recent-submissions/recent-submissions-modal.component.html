<!-- recent-submissions-modal.component.html -->
<ion-header>
  <ion-toolbar>
    <ion-title>Pending Submissions</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="close()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="content-wrapper">
    
    <!-- Segment Tabs -->
    <ion-segment [(ngModel)]="onlyUnseen" (ionChange)="reload()" class="filter-segment">
      <ion-segment-button [value]="true">
        <ion-label>UNSEEN</ion-label>
      </ion-segment-button>
      <ion-segment-button [value]="false">
        <ion-label>ALL</ion-label>
      </ion-segment-button>
    </ion-segment>

    <!-- Submissions List -->
    <div class="submissions-list">
      <div 
        *ngFor="let item of items$ | async; trackBy: trackById" 
        class="submission-item"
        [class.busy]="isBusy(item.id)"
      >
        <!-- Vehicle Info -->
        <div class="vehicle-info">
          <div class="vehicle-label">{{ item.vanType }} {{ item.vanNumber }}</div>
          <div class="submission-time">{{ item.createdAt?.toDate() | date:'M/d/yy, h:mm a' }}</div>
        </div>

        <!-- Actions -->
        <div class="action-buttons">
          <ion-button 
            size="small" 
            fill="outline"
            (click)="view(item)"
            [disabled]="isBusy(item.id)"
          >
            View
          </ion-button>
          
          <ion-button 
            size="small" 
            color="success"
            (click)="approve(item)"
            [disabled]="isBusy(item.id)"
          >
            Approve
          </ion-button>
          
          <ion-button 
            size="small" 
            color="danger"
            (click)="reject(item)"
            [disabled]="isBusy(item.id)"
          >
            Reject
          </ion-button>
        </div>

        <!-- Loading indicator -->
        <ion-spinner *ngIf="isBusy(item.id)" name="crescent" class="loading-spinner"></ion-spinner>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="(items$ | async)?.length === 0" class="empty-state">
      <p>{{ onlyUnseen ? 'No unseen submissions' : 'No submissions found' }}</p>
    </div>
    
  </div>
</ion-content>